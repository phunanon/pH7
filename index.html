<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping List</title>
    <script src="pH7.js"></script>
    <script>
      function addItem({ items }) {
        const newItem = [prompt("Enter item name"), true];
        items = [...items, newItem];
        return { items };
      }
      const toggle =
        v =>
        ({ items }) => ({
          items: items.map(([value, on]) => [value, value == v ? !on : on]),
        });
      const remove = ({ items }, v) => ({
        items: items.filter(([value]) => value != v),
      });
      const sort = items => [
        ...items.filter(([_, on]) => on),
        ...items.filter(([_, on]) => !on),
      ];
      const showItems = ([value, on]) => [
        ["btn", { onclick: state => remove(state, value) }, "&#10007;"],
        ["span", { class: on ? "" : "off", onclick: toggle(value) }, value],
        "<hr>",
      ];
      function DomLoad() {
        mount(
          document.body,
          ({ items }) => [
            "div",
            { onclick: addItem },
            ...(items.length ? sort(items).map(showItems) : ["Tap to add."]),
          ],
          { items: [] },
        );
      }
    </script>
    <style>
      * {
        font-family: sans-serif;
        margin: 0;
        padding: 0;
        font-size: 1.2rem;
        user-select: none;
      }
      div {
        padding: 8vh 4vw;
      }
      span {
        padding: 0.5rem 0 0.5rem 0.5rem;
        display: inline-block;
        width: calc(100% - 5vw - 2rem);
      }
      btn {
        width: 2rem;
        height: 2rem;
        border: none;
      }
      .off {
        color: #aaa;
      }
    </style>
  </head>
  <body onload="DomLoad()"></body>
</html>
